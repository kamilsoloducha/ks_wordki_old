version: '3'
services:
 wordki:
  container_name: wordki
  image: wordki
  build:
   context: ../../
   dockerfile: ./src/Wordki.Api/Dockerfile.Development
  ports:
   - "5000:5000"
  links:
   - mysql
  depends_on:
   - mysql
  command: ["./wait", "db:3306"]
 mysql:
  container_name: db
  image: mysql/mysql-server:5.7
  restart: always
  ports:
   - "3306:3306"
  volumes:
   - dbvol:/var/lib/mysql
  env_file:
   - secrets.env
  command: mysqld --character-set-server=utf8 --collation-server=utf8_general_ci
 phpmyadmin:
  container_name: phpmyadmin
  image: phpmyadmin/phpmyadmin
  ports:
   - "81:80"
  env_file:
   - secrets.env
  depends_on:
   - mysql
volumes:
 dbvol:
  external: false
